<a mat-list-item
   class="menu-item"
   [routerLink]="routeHistory() + '/' + item().route"
   (click)="toggleNested()"
   routerLinkActive="selected-menu-item"
   #rla="routerLinkActive"
   [routerLinkActiveOptions]="{exact: true}"
   [activated]="rla.isActive">
  <mat-icon
    [fontSet]="rla.isActive ?'material-icons': 'material-icons-outlined'"
    matListItemIcon>{{ item().icon }}
  </mat-icon>
  <span matListItemTitle *ngIf="!collapsed()">{{ item().label }}</span>

  <span matListItemMeta>
    @if (item().subItems) {
      <span>
        @if (nestedMenuOpen()) {
          <mat-icon>expand_less</mat-icon>
        } @else {
          <mat-icon>expand_more</mat-icon>
        }
      </span>
    }
    @if (item().extraInfo) {
      <button mat-icon-button *ngIf="!collapsed()">
        <mat-icon>info</mat-icon>
    </button>
    }

  </span>
</a>

<!--@if (item().subItems && nestedMenuOpen()) {-->
<!--  <mat-nav-list>-->
<!--    @for (item of item().subItems; track item.label) {-->
<!--      <app-menu-item [item]="item" [collapsed]="collapsed()"></app-menu-item>-->
<!--    }-->
<!--  </mat-nav-list>-->
<!--}-->

@if (item().subItems && nestedMenuOpen()) {
  <div @expandContractMenu>
    @for (subItem of item().subItems; track subItem.label) {
<!--      <a-->
<!--        mat-list-item-->
<!--        class="menu-item"-->
<!--        [class.indented]="!collapsed()"-->
<!--        [routerLink]="item().route + '/' + subItem.route"-->
<!--        routerLinkActive-->
<!--        #rla="routerLinkActive"-->
<!--        [routerLinkActiveOptions]="{exact: true}"-->
<!--        [activated]="rla.isActive">-->
<!--        <mat-icon-->
<!--          [fontSet]="rla.isActive ?'material-icons': 'material-icons-outlined'"-->
<!--          matListItemIcon>{{ subItem.icon }}-->
<!--        </mat-icon>-->
<!--        <span matListItemTitle>{{ subItem.label }}</span>-->
<!--      </a>-->

      <app-menu-item [item]="subItem" [collapsed]="collapsed()" [routeHistory]="routeHistory() + '/' + item().route"></app-menu-item>

    }
  </div>
}



